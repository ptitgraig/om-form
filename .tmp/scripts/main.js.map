{"version":3,"sources":["main.js"],"names":["$","material","init","document","ready","state","initialSupport","currentGiftType","userVal","$pb","attr","progressbar","display_text","use_percentage","focus","click","onSupportBtnClicked","evt","preventDefault","target","addClass","prop","data","newSupport","recalculateSupport","updateGauge","amount","console","info","keyup","iptVal","val","checkIfNumber","value","isNumeric","length","iptval","initsup","gifttype","computedval","finalVal","jQuery"],"mappings":";;AAAA,CAAC,UAASA,CAAT,EAAW;AACVA,IAAEC,QAAF,CAAWC,IAAX;;AAEAF,IAAEG,QAAF,EAAYC,KAAZ,CAAkB,YAAW;;AAE3B,QAAIC,QAAQ;AACVC,sBAAiB,CADP;AAEVC,uBAAkB,IAFR;AAGVC,eAAS;AAHC,KAAZ;;AAMA;AACA,QAAIC,MAAMT,EAAE,yBAAF,CAAV;AACAS,QAAIC,IAAJ,CAAS,qBAAT,EAAgCL,MAAMC,cAAtC,EAAsDK,WAAtD,CAAkE,EAACC,cAAc,MAAf,EAAuBC,gBAAgB,IAAvC,EAAlE;AACAb,MAAE,YAAF,EAAgBc,KAAhB;;AAEA;AACAd,MAAE,cAAF,EAAkBe,KAAlB,CAAwBC,mBAAxB;;AAGA,aAASA,mBAAT,CAA6BC,GAA7B,EAAkC;AAChCA,UAAIC,cAAJ;AACAlB,QAAEiB,IAAIE,MAAN,EAAcC,QAAd,CAAuB,aAAvB;AACApB,QAAE,UAAF,EACGqB,IADH,CACQ,UADR,EACoB,KADpB,EAEGP,KAFH;AAGAT,YAAME,eAAN,GAAwBP,EAAEiB,IAAIE,MAAN,EAAcG,IAAd,CAAmB,MAAnB,CAAxB;AACA,UAAIC,aAAaC,mBAAmBnB,MAAMG,OAAzB,EAAkCH,MAAMC,cAAxC,EAAwDD,MAAME,eAA9D,CAAjB;AACAkB,kBAAYF,UAAZ;AACD;;AAED,aAASE,WAAT,CAAqBC,MAArB,EAA6B;AAC3BC,cAAQC,IAAR,CAAa,qBAAb,EAAmCF,MAAnC;AACAjB,UAAIC,IAAJ,CAAS,qBAAT,EAAgCgB,MAAhC,EACGf,WADH,CACe,EAACC,cAAc,MAAf,EAAuBC,gBAAgB,IAAvC,EADf;AAED;;AAKDb,MAAE,UAAF,EAAc6B,KAAd,CAAoB,UAASZ,GAAT,EAAa;AAC/B,UAAIa,SAAS9B,EAAEiB,IAAIE,MAAN,EAAcY,GAAd,EAAb;AACA1B,YAAMG,OAAN,GAAgBsB,MAAhB;AACA,UAAIP,aAAaC,mBAAmBnB,MAAMG,OAAzB,EAAkCH,MAAMC,cAAxC,EAAwDD,MAAME,eAA9D,CAAjB;AACAkB,kBAAYF,UAAZ;AACD,KALD;;AAOA,aAASS,aAAT,CAAuBC,KAAvB,EAA8B;AAC5B,aAAO,CAACjC,EAAEkC,SAAF,CAAYD,KAAZ,CAAD,IAAuBA,MAAME,MAAN,GAAe,CAA7C;AACD;;AAED;;;;;;AAMA,aAASX,kBAAT,CAA4BY,MAA5B,EAAoCC,OAApC,EAA6CC,QAA7C,EAAuD;AACrD,UAAIC,cAAeD,aAAa,SAAb,GAAyBF,SAAO,EAAhC,GAAqCA,SAAO,CAA/D;AACA,UAAII,WAAWH,UAAUE,WAAzB;AACA,aAAOC,QAAP;AACD;AAEF,GA5DD;AA+DD,CAlED,EAkEGC,MAlEH","file":"main.js","sourcesContent":["(function($){\n  $.material.init();\n\n  $(document).ready(function() {\n\n    var state = {\n      initialSupport : 0,\n      currentGiftType : null,\n      userVal: 0\n    };\n\n    // Page initialisation\n    var $pb = $('.progress .progress-bar');\n    $pb.attr('data-transitiongoal', state.initialSupport).progressbar({display_text: 'fill', use_percentage: true});\n    $(\"#firstname\").focus();\n\n    // events\n    $('.btn-support').click(onSupportBtnClicked);\n\n\n    function onSupportBtnClicked(evt) {\n      evt.preventDefault();\n      $(evt.target).addClass('btn-default');\n      $('#montant')\n        .prop(\"disabled\", false)\n        .focus();\n      state.currentGiftType = $(evt.target).data('type');\n      var newSupport = recalculateSupport(state.userVal, state.initialSupport, state.currentGiftType);\n      updateGauge(newSupport);\n    }\n\n    function updateGauge(amount) {\n      console.info('updating gauge to :',amount);\n      $pb.attr('data-transitiongoal', amount)\n        .progressbar({display_text: 'fill', use_percentage: true});\n    }\n\n  \t\n    \n\n    $('#montant').keyup(function(evt){\n      var iptVal = $(evt.target).val();\n      state.userVal = iptVal;\n      var newSupport = recalculateSupport(state.userVal, state.initialSupport, state.currentGiftType);\n      updateGauge(newSupport);\n    });\n\n    function checkIfNumber(value) {\n      return !$.isNumeric(value) && value.length > 0;\n    }\n\n    /*\n    @param iptval: user input value\n    @param initsup: initial support\n    @param gifttype: mensual or ponctual gift\n    returns the new support value\n    */\n    function recalculateSupport(iptval, initsup, gifttype) {\n      var computedval = (gifttype === 'monthly' ? iptval*13 : iptval*1);\n      var finalVal = initsup + computedval;\n      return finalVal;\n    }\n\n  });\n\n\n})(jQuery);"]}